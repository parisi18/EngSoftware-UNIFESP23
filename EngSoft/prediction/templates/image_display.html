<form id="image-upload-form">
    {% csrf_token %}
    <input type="file" name="image" accept="image/*">
</form>

<button id="predict-button" disabled>Predict</button>

<div id="prediction-result">
    <h1>Resultado: <span id="result-text">{{ res_pred }}</span></h1>
</div>


<script>
    // Desabilita o botao predicao por padrao  
    var predictButton = document.getElementById('predict-button');
    predictButton.disabled = true;

    // Adiciona uma acao para o carregamento da imagem
    var fileInput = document.querySelector('input[name="image"]');

    // Habilita o botao predicao
    fileInput.addEventListener('change', function() {
        predictButton.disabled = false;
    });

    // Aciona a predicao ao clicar
    predictButton.addEventListener('click', function() {
        var form = document.getElementById('image-upload-form');
        var formData = new FormData(form);

        fetch('{% url "predicao" %}', {
            method: 'POST',
            body: formData,
        })
        .then(response => response.text())
        .then(data => {
            document.getElementById('result-text').textContent = data;
        })
        .catch(error => {
            console.error('Prediction failed:', error);
        });
    });
</script>