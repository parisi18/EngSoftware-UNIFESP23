<form action="{% url 'image' %}" method="post" enctype="multipart/form-data" id="image-upload-form">
    {% csrf_token %}
    <input type="file" name="image" accept="image/*">
    <button type="submit">Upload</button>
</form>

<button id="predict-button">Predict</button>

<div id="prediction-result"> 
    <h1>Resultado: <span id="result-text">{{ res_pred }}</span></h1>
</div>

<script>
    document.getElementById('predict-button').addEventListener('click', function() {
        var form = document.getElementById('image-upload-form');
        var formData = new FormData(form);

        fetch(`{% url 'image' %}`, {
            method: 'POST',
            body: formData,
            headers: {
                'X-CSRFToken': '{{ csrf_token }}'
            }
        })
        .then(response => response.text())
        .then(data => {
            document.getElementById('result-text').textContent = data;
        })
        .catch(error => {
            console.error('Prediction failed:', error);
        });
    });
</script>